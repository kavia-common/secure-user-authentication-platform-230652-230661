{"is_source_file": true, "format": "TypeScript", "description": "This file is a TypeScript module that defines an API client for a frontend application. It creates an Axios instance with interceptors to automatically handle authentication tokens and redirects to login on 401 responses. It also provides typed helper functions for performing GET, POST, PUT, and DELETE HTTP requests, incorporating environment-based configuration for the API base URL.", "external_files": ["../auth/tokenStorage"], "external_methods": ["getAuthToken", "clearAuthToken"], "published": ["apiClient", "apiGet", "apiPost", "apiPut", "apiDelete"], "classes": [], "methods": [{"name": "function resolveApiBaseUrl(): string { resolveApiBaseUrl", "description": "Determines the API base URL from environment variables, falling back to an empty string for same-origin.", "scope": "", "scopeKind": ""}, {"name": "function maybeRedirectToLogin(): void { maybeRedirectToLogin", "description": "Performs a redirect to '/login' if not already on the login page, used for handling 401 errors.", "scope": "", "scopeKind": ""}, {"name": "export async function apiDelete<TResponse>( apiDelete", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function apiGet<TResponse>( apiGet", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function apiPost<TResponse, TBody = unknown>( apiPost", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function apiPut<TResponse, TBody = unknown>( apiPut", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["axios.create", "apiClient.get", "apiClient.post", "apiClient.put", "apiClient.delete", "getAuthToken", "clearAuthToken", "maybeRedirectToLogin"], "search-terms": ["axios interceptors", "auth token attachment", "TypeScript API helper", "environment base URL", "automatic login redirect"], "state": 2, "file_id": 37, "knowledge_revision": 85, "git_revision": "07bb78d5536b41089a81393a98c9197bdf354c12", "ctags": [{"_type": "tag", "name": "apiBase", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^  const apiBase = env.REACT_APP_API_BASE;$/", "language": "TypeScript", "kind": "constant", "scope": "resolveApiBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "apiBaseURL", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^const apiBaseURL = resolveApiBaseUrl();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "apiClient", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^export const apiClient: AxiosInstance = axios.create({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "apiDelete", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^export async function apiDelete<TResponse>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiGet", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^export async function apiGet<TResponse>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiPost", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^export async function apiPost<TResponse, TBody = unknown>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiPut", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^export async function apiPut<TResponse, TBody = unknown>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "backendUrl", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^  const backendUrl = env.REACT_APP_BACKEND_URL;$/", "language": "TypeScript", "kind": "constant", "scope": "resolveApiBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "candidate", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^  const candidate = (typeof apiBase === \"string\" && apiBase.trim()) || (typeof backendUrl === \"s/", "language": "TypeScript", "kind": "constant", "scope": "resolveApiBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "currentPath", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^  const currentPath = window.location?.pathname ?? \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "maybeRedirectToLogin", "scopeKind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^  const env = import.meta.env as Record<string, unknown>;$/", "language": "TypeScript", "kind": "constant", "scope": "resolveApiBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "maybeRedirectToLogin", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^function maybeRedirectToLogin(): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^  const res: AxiosResponse<TResponse> = await apiClient.delete<TResponse>(url, config);$/", "language": "TypeScript", "kind": "constant", "scope": "apiDelete", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^  const res: AxiosResponse<TResponse> = await apiClient.get<TResponse>(url, config);$/", "language": "TypeScript", "kind": "constant", "scope": "apiGet", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^  const res: AxiosResponse<TResponse> = await apiClient.post<TResponse>(url, body, config);$/", "language": "TypeScript", "kind": "constant", "scope": "apiPost", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^  const res: AxiosResponse<TResponse> = await apiClient.put<TResponse>(url, body, config);$/", "language": "TypeScript", "kind": "constant", "scope": "apiPut", "scopeKind": "function"}, {"_type": "tag", "name": "resolveApiBaseUrl", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^function resolveApiBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^    const status = error.response?.status;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/api/client.ts", "pattern": "/^    const token = getAuthToken();$/", "language": "TypeScript", "kind": "constant"}], "hash": "c534a6bcdcf1543ff58826aba990026e", "format-version": 4, "code-base-name": "frontend_app", "filename": "frontend_app/src/api/client.ts", "revision_history": [{"85": "07bb78d5536b41089a81393a98c9197bdf354c12"}]}