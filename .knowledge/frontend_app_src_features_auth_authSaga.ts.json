{"is_source_file": true, "format": "TypeScript", "description": "This file defines Redux Saga generators for handling authentication flows, including login, registration, loading user data, and logout. It manages side effects like API calls, token storage, and error handling.", "external_files": ["axios", "../../auth/tokenStorage", "./authApi", "./authSlice"], "external_methods": ["call", "put", "takeLatest", "clearAuthToken", "setAuthToken", "getMe", "login", "register", "authFailed", "authSucceeded", "loadMeRequested", "loginRequested", "logoutRequested", "meLoaded", "registerRequested"], "published": ["authSaga"], "classes": [], "methods": [{"name": "function toErrorMessage(error: unknown): string { toErrorMessage", "description": "Converts unknown error objects, such as Axios errors, into user-friendly message strings.", "scope": "", "scopeKind": ""}, {"name": "function isAxiosErrorWithStatus(error: unknown): error is AxiosError { isAxiosErrorWithStatus", "description": "Type guard that checks if an error is an AxiosError with an HTTP response status.", "scope": "", "scopeKind": ""}, {"name": "handleLogin", "description": "Saga generator that handles login flow, performs API call, persists token, and dispatches success or failure actions."}, {"name": "handleRegister", "description": "Saga generator that handles user registration, saves token, and dispatches appropriate actions."}, {"name": "handleLoadMe", "description": "Saga generator that loads current user data, handles session expiration by clearing tokens and logging out."}, {"name": "handleLogout", "description": "Saga generator that handles user logout by clearing persisted tokens."}, {"name": "authSaga", "description": "Root saga that registers watchers for authentication related actions and triggers corresponding handlers."}], "calls": ["call(login, action.payload)", "put(authSucceeded({ user: res.user, token: res.token }))", "put(authFailed({ error: toErrorMessage(err) }))", "call(register, action.payload)", "getMe()", "clearAuthToken()", "setAuthToken(res.token)", "put(meLoaded({ user: res.user }))", "put(logoutRequested())", "put(authFailed({ error: \"Session expired. Please log in again.\" }))", "takeLatest(loginRequested.type, handleLogin)", "takeLatest(registerRequested.type, handleRegister)", "takeLatest(loadMeRequested.type, handleLoadMe)", "takeLatest(logoutRequested.type, handleLogout)"], "search-terms": ["authSaga", "redux-saga", "handleLogin", "handleRegister", "handleLoadMe", "handleLogout", "tokenStorage", "authApi", "authSlice", "AxiosError", "toErrorMessage"], "state": 2, "file_id": 40, "knowledge_revision": 93, "git_revision": "6bef831816c355a23923c6c65f8ce2159c3be375", "ctags": [{"_type": "tag", "name": "authSaga", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^export function* authSaga(): Generator {$/", "language": "TypeScript", "kind": "generator"}, {"_type": "tag", "name": "handleLoadMe", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^function* handleLoadMe(_action: ReturnType<typeof loadMeRequested>): Generator {$/", "language": "TypeScript", "kind": "generator"}, {"_type": "tag", "name": "handleLogin", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^function* handleLogin(action: ReturnType<typeof loginRequested>): Generator {$/", "language": "TypeScript", "kind": "generator"}, {"_type": "tag", "name": "handleLogout", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^function* handleLogout(_action: ReturnType<typeof logoutRequested>): Generator {$/", "language": "TypeScript", "kind": "generator"}, {"_type": "tag", "name": "handleRegister", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^function* handleRegister(action: ReturnType<typeof registerRequested>): Generator {$/", "language": "TypeScript", "kind": "generator"}, {"_type": "tag", "name": "isAxiosErrorWithStatus", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^function isAxiosErrorWithStatus(error: unknown): error is AxiosError {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "msg", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^    const msg = (error as { message?: unknown }).message;$/", "language": "TypeScript", "kind": "constant", "scope": "toErrorMessage", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^    const res = (yield call(getMe)) as Awaited<ReturnType<typeof getMe>>;$/", "language": "TypeScript", "kind": "constant", "scope": "handleLoadMe", "scopeKind": "generator"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^    const res = (yield call(login, action.payload)) as Awaited<ReturnType<typeof login>>;$/", "language": "TypeScript", "kind": "constant", "scope": "handleLogin", "scopeKind": "generator"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^    const res = (yield call(register, action.payload)) as Awaited<ReturnType<typeof register>>;$/", "language": "TypeScript", "kind": "constant", "scope": "handleRegister", "scopeKind": "generator"}, {"_type": "tag", "name": "toErrorMessage", "path": "/home/kavia/workspace/code-generation/secure-user-authentication-platform-230652-230661/frontend_app/src/features/auth/authSaga.ts", "pattern": "/^function toErrorMessage(error: unknown): string {$/", "language": "TypeScript", "kind": "function"}], "hash": "d8951308641aa3f203df41aa79080c11", "format-version": 4, "code-base-name": "frontend_app", "filename": "frontend_app/src/features/auth/authSaga.ts", "revision_history": [{"93": "6bef831816c355a23923c6c65f8ce2159c3be375"}]}